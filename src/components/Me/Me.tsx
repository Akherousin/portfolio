'use client';

import useMousePosition from '@/hooks/use-mouse-position.hook';
import styles from './Me.module.css';
import { useState } from 'react';
import { motion } from 'framer-motion';

type MeProps = {
  mouthOpened: boolean;
};

function Me({ mouthOpened }: MeProps) {
  const mousePosition = useMousePosition();

  let windowHeight = 0;
  let windowWidth = 0;

  if (typeof window !== 'undefined') {
    windowHeight = window.innerHeight;
    windowWidth = window.innerWidth;
  }

  const x = percentage(mousePosition.x, windowWidth) - 50;
  const y = percentage(mousePosition.y, windowHeight) - 50;

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 100 418 289"
      style={
        {
          '--mouse-x': x,
          '--mouse-y': y,
        } as React.CSSProperties
      }
      className={styles.me}
      data-mouth={mouthOpened ? 'opened' : 'closed'}
    >
      <g className="Frame" clipPath="url(#a)">
        <path
          fill="#3ABAE0"
          d="M83.6 325.406s57.897 39.219 141.688 30.265c83.79-8.954 165.38-74.081 165.71-143.924C391.328 141.905 325.5 157 325.5 157s-67.654 31.531-115.5 37.5c-47.846 5.969-140.84-58.14-174.216-21.547C2.407 209.545 3.13 268.636 83.6 325.406z"
          className="bg"
        ></path>
        <g>
          <mask
            id="b"
            width="401"
            height="401"
            x="11"
            y="-29"
            className="b"
            maskUnits="userSpaceOnUse"
            style={{ maskType: 'luminance' }}
          >
            <g className="clip-path">
              <path
                fill="#fff"
                d="M80.911 336.181s62.326 43.695 152.528 33.719c90.201-9.976 178.034-82.536 178.389-160.349.356-77.813-17.412-177.974-66.313-191.297-71.447-37.444-119.211-51.401-170.797-44.75-51.586 6.65-102.237 47.255-137.812 128.815C.956 143.11-5.717 272.933 80.91 336.181z"
                className="Vector"
              ></path>
            </g>
          </mask>
          <g className="Group" mask="url(#b)">
            <g>
              <g className="body">
                <path
                  fill="#fff"
                  stroke="currentColor"
                  strokeWidth="2"
                  d="M224.954 324.641v.817l.8.163c29.215 5.96 47.567 31.415 48.033 57.083H141.736c.464-25.69 18.76-51.123 48.033-57.083l.8-.163v-31.102a20.61 20.61 0 011.152-7.462 19.24 19.24 0 013.709-6.358c1.609-1.82 3.531-3.262 5.649-4.245a15.858 15.858 0 016.683-1.487c2.293 0 4.565.505 6.683 1.487 2.117.983 4.039 2.425 5.648 4.245a19.24 19.24 0 013.709 6.358 20.61 20.61 0 011.152 7.462v30.285z"
                  className="neck"
                ></path>
                <path
                  fill="#4A4A4A"
                  stroke="currentColor"
                  strokeWidth="2"
                  d="M190.5 326c-28-4.65-52.683 18.906-49.183 55.906h133S285 330.35 226.5 326c-4 13.85-36 11.35-36 0z"
                  className="Vector 6"
                ></path>
              </g>
              <g className="head">
                <g className={styles.ear}>
                  <path
                    fill="#fff"
                    stroke="currentColor"
                    strokeWidth="2"
                    d="M153.833 253.663l-.036.014-.036.017c-1.526.725-3.26.981-5.117.73-1.863-.252-3.821-1.011-5.755-2.266-1.934-1.256-3.792-2.973-5.457-5.063-1.661-2.086-3.089-4.492-4.196-7.078-2.09-5.307-2.695-10.862-1.741-15.446.955-4.586 3.356-7.719 6.528-8.949l.037-.015.035-.017c1.531-.737 3.271-1.001 5.138-.752 1.872.25 3.841 1.012 5.786 2.276 1.944 1.264 3.811 2.994 5.482 5.101 1.667 2.102 3.097 4.526 4.202 7.13 2.072 5.31 2.658 10.857 1.688 15.424-.97 4.571-3.381 7.682-6.558 8.894z"
                    className="Vector"
                  ></path>
                  <path
                    fill="currentColor"
                    stroke="currentColor"
                    strokeWidth="2"
                    d="M142.768 222.004l-.044.001-.043.004a19.975 19.975 0 00-3.492.656c.857-.465 1.773-.883 2.714-1.16 1.084-.319 2.145-.43 3.143-.23.949.191 1.902.674 2.811 1.64-.578-.078-1.196-.229-1.887-.4l-.044-.011c-.956-.238-2.059-.512-3.158-.5z"
                    className="Vector"
                  ></path>
                </g>
                <g className={styles.ear}>
                  <path
                    fill="#fff"
                    stroke="currentColor"
                    strokeWidth="2"
                    d="M285.507 243.122a22.234 22.234 0 01-4.061 5.967c-1.648 1.722-3.523 3.093-5.511 4.043-1.988.949-4.047 1.457-6.058 1.507-2.01.049-3.938-.358-5.68-1.194l-.022-.011-.023-.009c-3.626-1.524-6.401-4.749-7.673-9.051-1.272-4.304-.924-9.317 1.013-13.94a22.258 22.258 0 014.083-5.982c1.656-1.725 3.54-3.097 5.538-4.043 1.997-.947 4.064-1.448 6.081-1.489 2.016-.041 3.948.379 5.691 1.228l.022.01.022.01c3.6 1.544 6.35 4.772 7.604 9.064 1.256 4.293.903 9.285-1.026 13.89z"
                    className="Vector"
                  ></path>
                  <g className="Vector">
                    <mask id="c" fill="#fff" className="c">
                      <path d="M279.265 227.319c-2.84-.964-8.655-3.146-10.926-.196a.54.54 0 00-.132.291.583.583 0 00.268.566.549.549 0 00.309.085c1.547-.007 2.927-.756 4.502-.829 1.961.032 3.919.304 5.833.809a.351.351 0 00.274-.045c-.019.096.081-.052 0 0 .02-.096.157-.429.104-.513a.386.386 0 00-.232-.168z"></path>
                    </mask>
                    <path
                      fill="currentColor"
                      d="M279.265 227.319c-2.84-.964-8.655-3.146-10.926-.196a.54.54 0 00-.132.291.583.583 0 00.268.566.549.549 0 00.309.085c1.547-.007 2.927-.756 4.502-.829 1.961.032 3.919.304 5.833.809a.351.351 0 00.274-.045c-.019.096.081-.052 0 0 .02-.096.157-.429.104-.513a.386.386 0 00-.232-.168z"
                    ></path>
                    <path
                      fill="currentColor"
                      d="M279.265 227.319l-.57 1.91.086.03.088.021.396-1.961zm-10.926-.196l1.494 1.377.044-.049.04-.052-1.578-1.276zm.445.942l-.077-2.016h-.024l-.024.001.125 2.015zm4.502-.829l-.036-2.016-.061-.001-.062.003.159 2.014zm5.833.809l-.437 1.95.021.006.02.005.396-1.961zm.716-2.636c-1.349-.458-3.719-1.323-6.039-1.652-2.208-.314-5.221-.267-7.036 2.09l3.157 2.552c.456-.593 1.486-.93 3.464-.649 1.865.265 3.823.973 5.314 1.479l1.14-3.82zm-12.991.337c-.329.37-.538.835-.604 1.334l3.934.668a1.405 1.405 0 01-.341.752l-2.989-2.754zm-.604 1.334a2.653 2.653 0 00.236 1.477l3.565-1.643c.124.262.17.552.133.834l-3.934-.668zm.236 1.477c.219.464.567.857 1 1.129l1.997-3.412c.247.154.444.377.568.64l-3.565 1.643zm1 1.129c.434.272.933.409 1.434.394l-.251-4.03c.284-.008.568.07.814.224l-1.997 3.412zm1.385.395c1.059-.004 2.019-.264 2.732-.455.783-.211 1.312-.351 1.852-.377l-.318-4.027c-1.036.048-1.984.318-2.671.503-.757.203-1.261.322-1.749.324l.154 4.032zm4.461-.83c1.802.03 3.602.28 5.36.744l.873-3.9a26.409 26.409 0 00-6.305-.875l.072 4.031zm5.401.755c.614.148 1.25.043 1.769-.29l-2.198-3.432a1.569 1.569 0 011.22-.199l-.791 3.921zm1.769-.29c-.04.026-.104.065-.187.105a1.907 1.907 0 01-1.419.089 2.054 2.054 0 01-.747-.429 2.11 2.11 0 01-.516-.709 2.069 2.069 0 01-.172-1.047 1.904 1.904 0 01.632-1.244 1.9 1.9 0 011.412-.456c.263.022.549.1.826.259a2.087 2.087 0 011.016 2.186l-3.888-.94a2.1 2.1 0 00-.022.708 2.11 2.11 0 001.041 1.544c.279.159.566.238.83.26a1.917 1.917 0 001.765-.843 2.02 2.02 0 00.336-.93 2.087 2.087 0 00-.173-1.058 2.127 2.127 0 00-.519-.712 2.055 2.055 0 00-.75-.431 1.971 1.971 0 00-1.449.097 2.005 2.005 0 00-.214.119l2.198 3.432zm.845-1.246c-.022.112-.054.199-.024.106.011-.033.04-.123.066-.215.024-.081.069-.249.094-.445.013-.098.029-.267.013-.472a2.18 2.18 0 00-.332-1.007l-3.314 2.1a1.997 1.997 0 01-.309-.922c-.013-.171 0-.299.007-.353.014-.107.034-.169.027-.145l-.028.089-.032.102c-.009.03-.035.117-.056.222l3.888.94zm-.183-2.033a2.46 2.46 0 00-1.494-1.078l-.791 3.921a1.7 1.7 0 01-1.029-.743l3.314-2.1z"
                      mask="url(#c)"
                    ></path>
                  </g>
                </g>
                <g className={styles.face}>
                  <g className="Vector" filter="url(#d)">
                    <path
                      fill="#fff"
                      d="M157.937 252.319c3.722 27.936 38.497 54.028 51.33 56.189 12.753-2.161 43.432-24.853 49.355-56.189l7.897-48.451c0-31.128-16.063-56.362-44.499-56.362h-18.518c-28.436 0-51.488 25.234-51.488 56.362l5.923 48.451z"
                    ></path>
                    <path
                      stroke="currentColor"
                      strokeWidth="2"
                      d="M221.003 302.371c-4.627 2.838-8.742 4.577-11.737 5.122-3.009-.55-7.386-2.489-12.382-5.597-5.062-3.149-10.674-7.443-16.008-12.54-10.696-10.221-20.128-23.528-21.947-37.163l-.001-.006-5.914-48.38c.03-30.634 22.706-55.301 50.488-55.301h18.518c13.884 0 24.717 6.144 32.11 16.104 7.399 9.969 11.375 23.804 11.389 39.177l-7.882 48.359c-2.915 15.403-11.926 28.732-21.833 38.496-4.951 4.879-10.106 8.85-14.801 11.729z"
                    ></path>
                  </g>
                  <g className={styles['inner-face']}>
                    <path
                      stroke="currentColor"
                      strokeLinecap="round"
                      strokeWidth="2"
                      d="M175.705 215.621c9.428-6 4.714-6.874 18.856-3.437"
                      className={styles.brow}
                    ></path>
                    <path
                      stroke="currentColor"
                      strokeLinecap="round"
                      strokeWidth="2"
                      d="M225.06 212.76c8.599-3.341 8.276-7.046 19.042 4.224"
                      className={styles.brow}
                    ></path>
                    <g id="Group_2">
                      <g className={styles['opened-mouth']}>
                        <mask
                          id="mask1_98_739"
                          width="37"
                          height="22"
                          x="191"
                          y="265"
                          maskUnits="userSpaceOnUse"
                          style={{ maskType: 'alpha' }}
                        >
                          <g id="clip-path-2">
                            <path
                              id="mouth-clip"
                              fill="#fff"
                              d="M197.622 283.075c5.488 3.436 14.807 3.609 18.38 2.528 4.541-1.34 11.213-3.198 11.036-11.562-.119-6.959-5.785-8.061-9.319-7.369-9.871 1.966-10.779-.432-17.629-.843-5.153-.303-8.45 2.658-8.746 8.212-.237 4.603 3.771 7.478 6.278 9.034Z"
                            />
                          </g>
                        </mask>
                        <g mask="url(#mask1_98_739)">
                          <g id="Group_3">
                            <g id="mouth">
                              <path
                                id="Vector_7"
                                fill="currentColor"
                                d="M209.507 291.654c10.816 0 19.584-9.172 19.584-20.487 0-11.315-8.768-20.487-19.584-20.487-10.816 0-19.584 9.172-19.584 20.487 0 11.315 8.768 20.487 19.584 20.487Z"
                              />
                              <path
                                id="tongue"
                                fill="#FBA282"
                                d="M222.319 283.291c-4.116 2.161-8.643 3.217-13.207 3.078-4.563-.139-9.03-1.469-13.03-3.878 0 0 3.001-7.521 12.951-7.24 9.95.281 13.286 8.04 13.286 8.04Z"
                              />
                            </g>
                          </g>
                        </g>
                      </g>
                      <path
                        className={styles['closed-mouth']}
                        stroke="currentColor"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="1.04"
                        d="M198 275.5s10 10.5 22.5 0"
                      />
                    </g>
                    <g className="eyes">
                      <path
                        fill="currentColor"
                        d="M178.953 229.98c-.138 4.495 2.468 8.212 5.804 8.32 3.337.108 6.12-3.436 6.239-7.931.118-4.495-2.468-8.212-5.804-8.321-3.337-.108-6.121 3.437-6.239 7.932z"
                        className={styles.eye}
                      ></path>
                      <path
                        fill="currentColor"
                        d="M226.709 229.98c-.138 4.495 2.468 8.212 5.804 8.32 3.337.108 6.12-3.436 6.239-7.931.118-4.495-2.468-8.212-5.804-8.321-3.337-.108-6.12 3.437-6.239 7.932z"
                        className={styles.eye}
                      ></path>
                    </g>
                    <path
                      stroke="currentColor"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      d="M203 254s6.5 12 11.411 0"
                      className="nose"
                    ></path>
                    <path
                      fill="#F87223"
                      fillOpacity="0.4"
                      d="M250.725 249.471c0 2.604-5.149 8.251-10.341 8.251-5.192 0-9.401-.932-9.401-3.536s6.089-9.43 11.281-9.43 8.461 2.111 8.461 4.715z"
                      className="left-blush"
                    ></path>
                    <path
                      fill="#F87223"
                      fillOpacity="0.4"
                      d="M187.229 253.768c-2.716 4.464-7.655 4.237-12.483 1.759s-8.417-5.243-7.512-7.355c.685-5.463 8.938-4.745 13.766-2.267 4.828 2.478 7.134 5.75 6.229 7.863z"
                      className="right-blush"
                    ></path>
                  </g>
                  <path
                    fill="currentColor"
                    stroke="currentColor"
                    strokeWidth="2"
                    d="M259.784 164.298l.001.001c2.166 3.003 3.61 8.178 4.505 14.436.889 6.212 1.215 13.324 1.252 20.062.037 6.734-.215 13.071-.476 17.726a293.34 293.34 0 01-.311 4.847l-.013-.02a147.991 147.991 0 01-3.887-6.03c-3.048-4.986-6.666-11.569-9.012-18.028-1.592-4.384-2.993-9.408-3.997-13.35a213.039 213.039 0 01-1.459-6.098 5.052 5.052 0 00-.169-.753l-1.932.505.978-.208-.978.209v.002l.002.007.005.025.021.099.084.38.021.097c.049.353.072.8.064 1.342-.014.841-.103 1.839-.251 2.944-.295 2.208-.815 4.775-1.382 7.228a171.009 171.009 0 01-2.212 8.512l-.162.56-.043.146-.007.023-.003.008a36.073 36.073 0 01-.727 1.813 34.399 34.399 0 01-2.043 4.017c-.869 1.444-1.876 2.801-2.964 3.737-.811.698-1.602 1.109-2.372 1.211a1614.69 1614.69 0 00-1.174-14.345l-.319-3.762a515.059 515.059 0 01-.545-6.864 79.122 79.122 0 01-.059-.94c.018-.12.033-.235.045-.344.035-.337.06-.785-.073-1.164a1.138 1.138 0 00-.238-.407 1.005 1.005 0 00-1.655.259 1.132 1.132 0 00-.092.301 3.433 3.433 0 00-.023.565c.004.182.013.411.027.682-.034.197-.08.422-.136.673-.21.933-.555 2.152-.988 3.55-.865 2.792-2.06 6.22-3.171 9.347-.237.668-.489 1.405-.758 2.19-.991 2.895-2.202 6.435-3.69 9.52-.943 1.957-1.966 3.66-3.064 4.865-1.103 1.211-2.172 1.802-3.217 1.814h-.002c-.023.001-.142.004-.358-.305-.234-.334-.47-.888-.691-1.684-.44-1.583-.733-3.779-1.023-6.206l-.124-1.052c-.244-2.084-.5-4.258-.856-6.187-.407-2.209-.981-4.315-1.97-5.61-1.203-1.573-2.573-3.813-3.655-5.687a120.099 120.099 0 01-1.705-3.064 9.804 9.804 0 01-.101-.19l-.026-.048-.006-.012-.002-.003v-.001l-1.842.757c.386 1.267.596 3.094.674 5.187.078 2.074.027 4.339-.079 6.445a127.272 127.272 0 01-.613 7.569l-.012.102-.017.056a1.259 1.259 0 01-.118.255c-.109.18-.255.316-.496.36-.272.05-.867.019-1.939-.616-1.066-.631-2.508-1.804-4.418-3.852-1.478-1.584-3.27-4.143-4.695-7.032-1.43-2.899-2.44-6.03-2.457-8.772l-1.993-.114c-.368 3.031-.369 5.077-.276 7.023.027.583.062 1.146.098 1.719.084 1.345.171 2.739.171 4.546 0 3.71-.414 6.243-1.041 7.796-.63 1.558-1.328 1.847-1.836 1.821-.688-.034-1.734-.627-3.001-2.18-1.226-1.502-2.508-3.72-3.699-6.564-1.712-4.086-2.387-7.097-3.251-10.953a266.287 266.287 0 00-.759-3.318l-1.959.064-5.386 31.938c-1.405.5-2.631.595-3.707.413-1.206-.204-2.296-.769-3.29-1.629-2.018-1.747-3.574-4.653-4.741-7.885-1.158-3.206-1.891-6.608-2.334-9.221a65.761 65.761 0 01-.461-3.178 44.298 44.298 0 01-.117-1.085c.967-5.664 2.837-12.719 5.117-19.393 2.301-6.735 4.993-13.008 7.552-17.052 2.414-3.813 6.33-5.667 11.647-7.068 2.257-.595 4.72-1.098 7.39-1.643l1.443-.295c3.218-.662 6.693-1.41 10.351-2.453 7.074-2.018 15.445-2.116 22.74-1.646 3.637.235 6.986.608 9.748.947.76.093 1.48.184 2.152.269 1.746.221 3.166.4 4.103.466 2.383.166 7.252 1.234 12.67 3.857 5.406 2.618 11.298 6.755 15.797 13.018z"
                    className={styles['hair']}
                  ></path>
                </g>
              </g>
            </g>
          </g>
        </g>
      </g>
    </svg>
  );
}

function percentage(partialValue: number, totalValue: number) {
  return Math.round((100 * partialValue) / totalValue);
}

export default Me;
